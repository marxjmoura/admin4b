<!-- @@master = /includes/app.html-->
<!-- @@block = content -->
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">Device controls</li>
    <li class="breadcrumb-item active" aria-current="page">File manager</li>
  </ol>
</nav>
<div class="container-fluid">
  <h2>File manager</h2>
  <p>
    The file manager is a component that conect to the device's storage and allow users to select files to submit.
    See the example below:
  </p>
  <div class="form-group">
    <button type="button" class="btn btn-primary" data-toggle="file-manager" data-maxsize="1MB" data-type="image/jpeg,image/png">
      <i class="fa fa-folder-open-o"></i> Select a file
    </button>
    <small class="text-secondary">Only .jpeg and .png and maximum 1MB.</small>
  </div>
  <div class="table-responsive">
    <table class="table">
      <tr>
        <th>Filename</th>
        <th>Size</th>
      </tr>
      <tr id="file-data" class="d-none">
        <td class="align-middle">
          <img id="file-preview" class="rounded d-none" width="64">
          <span id="file-name"></span>
          <i id="is-invalid" class="fa fa-times-circle text-danger d-none"></i>
          <i id="is-valid" class="fa fa-check-circle text-success d-none"></i>
        </td>
        <td class="align-middle">
          <span id="file-size"></span>
        </td>
      </tr>
      <tr id="file-empty">
        <td colspan="2" class="text-secondary">
          No file selected.
        </td>
      </tr>
    </table>
  </div>
  <div class="source-code">
    <a href="#file-manager" data-toggle="collapse">
      <i class="fa fa-code"></i> Source code
    </a>
    <div id="file-manager" class="collapse">
      <div class="nav nav-tabs">
        <a href="#file-manager-html" class="active" data-toggle="tab">HTML</a>
        <a href="#file-manager-js" data-toggle="tab">JavaScript</a>
      </div>
      <div class="tab-content">
        <div id="file-manager-html" class="tab-pane active">
          <pre><code class="html">@@include('includes/code-examples/device-controls/file-manager/file-manager.html')</code></pre>
        </div>
        <div id="file-manager-js" class="tab-pane">
          <pre><code class="js">@@include('includes/code-examples/device-controls/file-manager/file-manager.js')</code></pre>
        </div>
      </div>
    </div>
  </div>
  <h3>File validation</h3>
  <p>
    The file manager has an built-in validation configured by attribute options:
  </p>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Validation</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="text-nowrap">
            <code>data-maxsize</code>
          </td>
          <td>
            Validates the size of the file. You can also define the size unit e.g., 1024B, 100KB, 2.4MB, 5GB.
          </td>
        </tr>
        <tr>
          <td class="text-nowrap">
            <code>data-type</code>
          </td>
          <td>
            Validates the type of the file. You need to use MIME types for validation e.g.,
            <code>image/png</code>, <code>application/pdf</code>. Use comma for separate multiple MIME types.
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="callout callout-warning">
    <h5>Warranties</h5>
    <p>Wrong values for <code>data-maxsize</code> or <code>data-type</code> will result in invalid file after validation.</p>
  </div>
  <h3>Events</h3>
  <p>
    Events can be used by developer to interact with the component and write custom logic.
  </p>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Event</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="text-nowrap"><code>file:change</code></td>
          <td>Triggered when the user selects a file.</td>
        </tr>
      </tbody>
    </table>
  </div>
  <p>
    After the file selection a few properties are added to the file by the component:
  </p>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Property</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="text-nowrap"><code>dataURL</code></td>
          <td>Base64 data URL.</td>
        </tr>
        <tr>
          <td class="text-nowrap"><code>errors</code></td>
          <td>
            File errors after validation:
            <ul class="mb-0">
              <li><code>maxsize</code>: The file exceeded the allowed maximum size.</li>
              <li><code>type</code>: The selected file type is not allowed.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="source-code">
    <a href="#css-setup" data-toggle="collapse">
      <i class="fa fa-code"></i> Source code
    </a>
    <div id="css-setup" class="sidebar-nav-group collapse">
      <pre><code class="js">@@include('includes/code-examples/device-controls/file-manager/file-manager-change.js')</code></pre>
    </div>
  </div>
</div>
<!-- @@close -->
